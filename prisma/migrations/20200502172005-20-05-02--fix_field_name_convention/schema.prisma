generator client {
  provider = "prisma-client-js"
}

datasource mysql {
  provider = "mysql"
  url = "***"
}

model Character {
  characterId   Int   @id
  exp           Int   @default(0)
  userId        Int   @map("user_id")
  users         User  @relation(fields: [userId], references: [userId])

  @@index([userId], name: "fk_Character_User1_idx")
  @@map("characters")
}

model CommitHistory {
  createdAt DateTime @default(now()) @map("created_at")
  habitId   Int      @map("habit_id")
  historyId Int      @default(autoincrement()) @id @map("history_id")
  userId    Int     @map("user_id")
  habits     Habit   @relation(fields: [habitId], references: [habitId])
  users      User    @relation(fields: [userId], references: [userId])

  @@index([habitId], name: "fk_Habit_History_Habit1_idx")
  @@index([userId], name: "fk_Habit_History_User1_idx")
  @@map("commit_history")
}

model Habit {
  category        String
  description     String?
  habitId         Int         @default(autoincrement()) @id @map("habit_id")
  isScheduled     Int         @map("is_scheduled")
  title           String
  commitHistory   CommitHistory[]
  userHabit       UserHabit[]

  @@map("habits")
}

model Ranking {
  exp         Int
  rankingId   Int             @id      @map("ranking_id")
  userName    String          @map("user_name")

  @@map("ranking")
}

model Scheduler {
  habitAlarmAt  DateTime        @map("habit_alarm_at")
  habitId       String          @map("habit_id")
  habitTitle    String          @map("habit_title")
  habitType     Int             @map("habit_type")
  scheduleId    Int             @id @map("schedule_id")
  userId        String          @map("user_id")

  @@map("scheduler")
}

model User {
  appleId       String?     @map("apple_id")
  createdAt     DateTime?   @map("created_at")
  email         String
  googleId      String?     @map("google_id")
  imageUrl      String?     @map("image_url")
  name          String
  updatedAt     DateTime?   @map("updated_at")
  userId        Int         @default(autoincrement()) @id @map("user_id")
  characters    Character[]
  commitHistory CommitHistory[]
  userHabit     UserHabit[]

  @@map("users")
}

model UserHabit {
  habitId   Int   @map("habit_id")
  userId    Int   @map("user_id")
  habits    Habit @relation(fields: [habitId], references: [habitId])
  users     User  @relation(fields: [userId], references: [userId])

  @@id([userId, habitId])
  @@index([habitId], name: "fk_User_Habit_Habit1_idx")
  @@index([userId], name: "fk_User_Habit_User1_idx")
  @@map("user_habit")
}