generator client {
  provider = "prisma-client-js"
}

datasource mysql {
  provider = "mysql"
  url = "***"
}

model Character {
  character_id Int   @id
  exp          Int   @default(0)
  user_id      Int
  users        User @relation(fields: [user_id], references: [user_id])

  @@index([user_id], name: "fk_Character_User1_idx")
  @@map("characters")
}

model CommitHistory {
  created_at DateTime @default(now())
  habit_id   Int
  history_id Int      @default(autoincrement()) @id
  user_id    Int
  habits     Habit   @relation(fields: [habit_id], references: [habit_id])
  users      User    @relation(fields: [user_id], references: [user_id])

  @@index([habit_id], name: "fk_Habit_History_Habit1_idx")
  @@index([user_id], name: "fk_Habit_History_User1_idx")
  @@map("commit_history")
}

model Habit {
  category       String
  description    String?
  habit_id       Int              @default(autoincrement()) @id
  is_scheduled   Int
  title          String
  commit_history CommitHistory[]
  user_habit     UserHabit[]

  @@map("habits")
}

model Ranking {
  exp        Int
  ranking_id Int    @id
  user_name  String

  @@map("ranking")
}

model Scheduler {
  habit_alarm_at DateTime
  habit_id       String
  habit_title    String
  habit_type     Int
  schedule_id    Int      @id
  user_id        String

  @@map("scheduler")
}

model User {
  apple_id       String?
  created_at     DateTime?
  email          String
  google_id      String?
  image_url      String?
  name           String
  updated_at     DateTime?
  user_id        Int              @default(autoincrement()) @id
  characters     Character[]
  commit_history CommitHistory[]
  user_habit     UserHabit[]

  @@map("users")
}

model UserHabit {
  habit_id Int
  user_id  Int
  habits   Habit @relation(fields: [habit_id], references: [habit_id])
  users    User  @relation(fields: [user_id], references: [user_id])

  @@id([user_id, habit_id])
  @@index([habit_id], name: "fk_User_Habit_Habit1_idx")
  @@index([user_id], name: "fk_User_Habit_User1_idx")
  @@map("user_habit")
}